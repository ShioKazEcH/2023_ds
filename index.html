<!DOCTYPE html>
<html>
<head>
<style>
  #puzzle-board {
    display: flex;
    flex-wrap: wrap;
    width: 200px;
  }

  .puzzle-piece {
    width: 50px;
    height: 50px;
    border: 1px solid black;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
  }
</style>
</head>
<body>

<div id="puzzle-board"></div>

<script>
  let board = [1, 2, 3, 4, 5, 6, 7, 8, 9];
  let puzzleBoard = document.getElementById('puzzle-board');

  function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  function drawBoard() {
    puzzleBoard.innerHTML = '';
    for (let i = 0; i < board.length; i++) {
      const puzzlePiece = document.createElement('div');
      puzzlePiece.className = 'puzzle-piece';
      puzzlePiece.innerText = board[i];
      puzzlePiece.setAttribute('data-index', i);
      puzzlePiece.addEventListener('click', handleMove);
      puzzleBoard.appendChild(puzzlePiece);
    }
  }

  function handleMove(e) {
    const clickedIndex = parseInt(e.target.getAttribute('data-index'));
    const emptyIndex = board.indexOf(9);

    if (isValidMove(clickedIndex, emptyIndex)) {
      [board[clickedIndex], board[emptyIndex]] = [board[emptyIndex], board[clickedIndex]];
      drawBoard();
      if (isSolved()) {
        alert('Congratulations! Puzzle solved!');
      }
    }
  }

  function isValidMove(clickedIndex, emptyIndex) {
    const validMoves = [emptyIndex - 3, emptyIndex + 3];
    if (emptyIndex % 3 !== 0) {
      validMoves.push(emptyIndex - 1);
    }
    if (emptyIndex % 3 !== 2) {
      validMoves.push(emptyIndex + 1);
    }
    return validMoves.includes(clickedIndex);
  }

  function isSolved() {
    for (let i = 0; i < board.length - 1; i++) {
      if (board[i] !== i + 1) {
        return false;
      }
    }
    return true;
  }

  board = shuffle(board);
  drawBoard();
</script>

</body>
</html>
